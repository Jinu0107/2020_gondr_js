<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/app.css">
</head>

<body>
    <div class="container">
        <header class="pr flex-center-row">
            <h1 class="fosi-125 color-fff tealc">코로나19 데이터 통합</h1>
            <select name="" id="" class="date_select">

            </select>
        </header>

        <div id="list" class="pr">
            <div class="item flex-center-column color-333">
                확진환자 누적
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                전일대비 소계
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                전일대비 국내발생
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                전일대비 해외유입
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                격리해제 누적
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                격리해제 전일대비
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                격리중 누적
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                격리중 전일대비
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                사망 누적
                <span class="fosi-15 color-000 fowe-7">
                </span>
            </div>
            <div class="item flex-center-column color-333">
                사망 전일대비
                <span class="fosi-15 fowe-7">
                </span>
            </div>
        </div>

    </div>
</body>

<script>
    Date.prototype.getStringDate = function () {
        return `${this.getFullYear()}-${(this.getMonth() + 1).toString().padStart(2, "0")}-${this.getDate().toString().padStart(2, "0")}`;
    }
    const log = console.log
    let initData = JSON.parse('<%-JSON.stringify(data_list)%>');
    let select = document.querySelector(".date_select");

    document.querySelectorAll(".fosi-15").forEach((dom, idx) => {
        let arrData = Object.values(initData[0]);
        log(arrData);
        dom.innerHTML = arrData[idx + 2];
    });

    initData.forEach(data => {
        let option = document.createElement("option");
        option.value = data.id;
        option.innerHTML = new Date(data.date).getStringDate();
        select.appendChild(option);
    });
    select.addEventListener("change", (e) => {
        let id = e.currentTarget.value;
        let findData = initData.find(x => x.id == id);
        document.querySelectorAll(".fosi-15").forEach((dom, idx) => {
            let arrData = Object.values(findData);
            log(arrData);
            dom.innerHTML = arrData[idx + 2];
        });
    });


</script>

</html>